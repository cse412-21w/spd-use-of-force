{"version":3,"sources":["timeline.js"],"names":["options","config","init","view","tooltip","vegaTooltip","Handler","call","renderer","vl","register","vega","vegaLite","uof","racee","race","d3","json","then","data","levels","parser","timeParse","year","timeFormat","bb","mm","map","incident","incident_type","indexOf","occured_date_time","Occurance_Date","blah","byMonth_Date","total","subject_race","Date","drawTimeline","drawDaily","selection","selectSingle","fields","bind","menu","single_Line","markLine","point","select","encode","x","fieldT","title","timeUnit","y","count","color","field","opacity","if","value","b","layer","width","height","hover2","encodings","on","nearest","empty","line_","transform","filter","line","selectInterval","fieldN","base","label","align","dx","dy","white","stroke","strokeWidth","dateLabel","white1","tooltipBase","markText","text","a","markRule","markCircle","render","viewElement","document","getElementById","appendChild"],"mappings":"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","file":"timeline.02a44989.js","sourceRoot":"..\\src","sourcesContent":["const options = {\r\n  config: {\r\n    // Vega-Lite default configuration\r\n  },\r\n  init: (view) => {\r\n    // initialize tooltip handler\r\n    view.tooltip(new vegaTooltip.Handler().call);\r\n  },\r\n  view: {\r\n    // view constructor options\r\n    // remove the loader if you don't want to default to vega-datasets!\r\n    //   loader: vega.loader({\r\n    //     baseURL: \"\",\r\n    //   }),\r\n    renderer: \"canvas\",\r\n  },\r\n};\r\n\r\nvl.register(vega, vegaLite, options);\r\n\r\n// Again, We use d3.csv() to process data\r\nvar uof = [];\r\nvar racee = [\"White\", \"Black or African American\", \"Not Specified\", \"Hispanic or Latino\", \"Asian\", \"American Indian/Alaska Native\", \"Nat Hawaiian/Oth Pac Islander\"]\r\n\r\nvar race = [\"American Indian/Alaska Native\", \"Asian\", \"Black or African American\", \"Hispanic or Latino\", \"Nat Hawaiian/Oth Pac Islander\", \"Not Specified\", \"White\"];\r\n\r\nd3.json(\"https://data.seattle.gov/resource/ppi5-g2bj.json?$limit=20000\").then(function(data) {\r\n  const levels = [\"Level 1 - Use of Force\", \"Level 2 - Use of Force\", \"Level 3 - Use of Force\",\"Level 3 - OIS\"];\r\n    const parser = d3.timeParse('%Y-%m-%dT%H:%M:%S.%L');\r\n    const year = d3.timeFormat('%B %Y');\r\n    const bb = d3.timeFormat('%Y-%m');\r\n    const mm = d3.timeFormat('%Y-%m-%d')\r\n    uof = data.map(incident => ({\r\n        ...incident,\r\n        incident_type: 1+levels.indexOf(incident.incident_type),\r\n        occured_date_time: parser(incident.occured_date_time),\r\n        Occurance_Date: year(parser(incident.occured_date_time)),\r\n        blah: bb(parser(incident.occured_date_time)),\r\n        byMonth_Date: bb(parser(incident.occured_date_time)),\r\n        total: incident.subject_race,\r\n        Date: mm(parser(incident.occured_date_time))\r\n\r\n    }));\r\n   // console.log(uof); // This line was used to check values stored in uof after processing. feel free to delete.\r\n    drawTimeline();\r\n    drawDaily();\r\n    // your other functions goes here. \r\n});\r\n \r\n  function drawTimeline() {\r\n   const selection = vl.selectSingle('Select')\r\n    .fields('subject_race')\r\n    .init({subject_race: racee[0]})\r\n    .bind(vl.menu(racee));\r\n  \r\n  const single_Line = vl.markLine({point: false})  \r\n    .data(uof)\r\n    .select(selection)\r\n    .encode(\r\n      vl.x().fieldT('byMonth_Date').title(\"Month, Year\").timeUnit(\"yearmonth\"),\r\n      vl.y().count(\"subject_race\").title(\"Counts\"), \r\n      vl.color().field(\"subject_race\"),\r\n      vl.opacity().if(selection, vl.value(1.0)).value(0.10),\r\n      vl.tooltip([{\"aggregate\": \"count\", \"field\": \"subject_race\"}, \"subject_race\", \"Occurance_Date\"])\r\n  );\r\n  // layer you made for highlighting the line when selecting a state in the menu, store it in const b\r\n  const b = vl.data(uof)\r\n    .layer(\r\n      single_Line\r\n    )\r\n    .title(\"Monthly Counts, by Race\")\r\n    .width(700)\r\n    .height(400);\r\n\r\n  \r\n   const hover2 = vl.selectSingle()\r\n    .encodings('x')\r\n    .on('mouseover')\r\n    .nearest(true)\r\n    .empty('none');\r\n  \r\n   const line_ = vl.markLine()\r\n    .data(uof)\r\n    .transform(vl.filter(selection))    // new \r\n    .encode(\r\n      vl.opacity().value(1),\r\n      vl.x().fieldT('byMonth_Date').title(\"Month, Year\").timeUnit(\"yearmonth\"),\r\n      vl.y().count(\"subject_race\").title(\"Counts\"),\r\n    );\r\n  \r\n    const line = vl.markLine()\r\n      .data(uof)\r\n      .transform(vl.filter(selection))  // new\r\n     .select(\r\n      vl.selectInterval().bind('scales').encodings('x'),    // Just adding a line of code, how amazing!\r\n       )\r\n      .encode(\r\n        vl.opacity().value(0),\r\n        vl.x().fieldT('byMonth_Date').title(\"Month, Year\").timeUnit(\"yearmonth\"),\r\n        vl.y().count(\"subject_race\").title(\"Counts\"),\r\n        vl.color().fieldN(\"subject_race\")\r\n      );\r\n      const base = line_.transform(vl.filter(hover2), vl.filter(selection));    // New: 2 filter in transform()\r\n      const label = {align: 'center', dx: 7, dy: -10};\r\n      const white = {stroke: 'white', strokeWidth: 2};\r\n      const dateLabel = {align: 'center', dx:5, dy: -5};\r\n      const white1 = {stroke: 'white', strokeWidth: 2};\r\n      const tooltipBase = base\r\n        .transform(vl.filter(hover2));\r\n      const tooltip = vl.layer(\r\n      tooltipBase.markText({ align: \"center\"})\r\n        .select(\r\n          vl.selectInterval().bind()\r\n        )\r\n        .encode(\r\n          vl.y().value(15),\r\n          vl.text().fieldT(\"byMonth_Date\").timeUnit(\"yearmonth\"),\r\n          vl.color().value(\"black\")\r\n        )\r\n      );\r\n    \r\n      const a = vl.data(uof)           // store your hover part in const a\r\n        .layer(\r\n          vl.markRule({color: '#aaa'})\r\n            .transform(vl.filter(hover2))\r\n            .encode(vl.x().fieldT('byMonth_Date').timeUnit(\"yearmonth\")),\r\n          //line_.markCircle({color: \"gray\"})\r\n          line_.markCircle()\r\n          .select(hover2)\r\n            .encode(vl.opacity().if(hover2, vl.value(1)).value(0), vl.color().fieldN(\"subject_race\")),\r\n          base.markText(label, white).encode(vl.text().count('subject_race')),\r\n          base.markText(label).encode(vl.text().count('subject_race')),\r\n          tooltip\r\n        )\r\n      .title(\"Total Monthly Counts\")\r\n      .width(600)\r\n      .height(400);\r\n    \r\n  // combine 2 layer\r\n  return vl.layer(b, a, line).render()\r\n    .then(viewElement => {\r\n    // render returns a promise to a DOM element containing the chart\r\n    // viewElement.value contains the Vega View object instance\r\n    document.getElementById('view1').appendChild(viewElement);\r\n  });\r\n}\r\n\r\nfunction drawDaily() {\r\n  const selection = vl.selectSingle('Select')\r\n    .fields('subject_race')\r\n    .init({subject_race: racee[0]})\r\n    .bind(vl.menu(racee));\r\n  \r\n  const single_Line = vl.markLine({point: false})  \r\n    .data(uof)\r\n    .select(selection)\r\n    .encode(\r\n      vl.x().fieldT('Date').title(\"Month, Day, Year\").timeUnit(\"yearmonthdate\"),\r\n      vl.y().count(\"subject_race\").title(\"Counts\"), \r\n      vl.color().field(\"subject_race\"),\r\n      vl.opacity().if(selection, vl.value(1.0)).value(0.10),\r\n      vl.tooltip([{\"aggregate\": \"count\", \"field\": \"subject_race\"}, \"subject_race\", \"Occurance_Date\"])\r\n  );\r\n  // layer you made for highlighting the line when selecting a state in the menu, store it in const b\r\n  const b = vl.data(uof)\r\n    .layer(\r\n      single_Line\r\n    )\r\n    .title(\"Daily Counts, by Race\")\r\n    .width(700)\r\n    .height(400);\r\n\r\n  \r\n   const hover2 = vl.selectSingle()\r\n    .encodings('x')\r\n    .on('mouseover')\r\n    .nearest(true)\r\n    .empty('none');\r\n  \r\n   const line_ = vl.markLine()\r\n    .data(uof)\r\n    .transform(vl.filter(selection))    // new \r\n    .encode(\r\n      vl.opacity().value(1),\r\n      vl.x().fieldT('Date').title(\"Month, Day, Year\").timeUnit(\"yearmonthdate\"),\r\n      vl.y().count(\"subject_race\").title(\"Counts\"),\r\n    );\r\n  \r\n    const line = vl.markLine()\r\n      .data(uof)\r\n      .transform(vl.filter(selection))  // new\r\n     .select(\r\n      vl.selectInterval().bind('scales').encodings('x'),    // Just adding a line of code, how amazing!\r\n       )\r\n      .encode(\r\n        vl.opacity().value(0),\r\n        vl.x().fieldT('Date').title(\"Month, Day, Year\").timeUnit(\"yearmonthdate\"),\r\n        vl.y().count(\"subject_race\").title(\"Counts\"),\r\n        vl.color().fieldN(\"subject_race\")\r\n      );\r\n      const base = line_.transform(vl.filter(hover2), vl.filter(selection));    // New: 2 filter in transform()\r\n      const label = {align: 'center', dx: 7, dy: -10};\r\n      const white = {stroke: 'white', strokeWidth: 2};\r\n      const dateLabel = {align: 'center', dx:5, dy: -5};\r\n      const white1 = {stroke: 'white', strokeWidth: 2};\r\n      const tooltipBase = base\r\n        .transform(vl.filter(hover2));\r\n      const tooltip = vl.layer(\r\n      tooltipBase.markText({ align: \"center\"})\r\n        .select(\r\n          vl.selectInterval().bind()\r\n        )\r\n        .encode(\r\n          vl.y().value(15),\r\n          vl.text().fieldT(\"Date\").timeUnit(\"yearmonthdate\"),\r\n          vl.color().value(\"black\")\r\n        )\r\n      );\r\n    \r\n      const a = vl.data(uof)           // store your hover part in const a\r\n        .layer(\r\n          vl.markRule({color: '#aaa'})\r\n            .transform(vl.filter(hover2))\r\n            .encode(vl.x().fieldT('Date').timeUnit(\"yearmonthdate\")),\r\n          //line_.markCircle({color: \"gray\"})\r\n          line_.markCircle()\r\n          .select(hover2)\r\n            .encode(vl.opacity().if(hover2, vl.value(1)).value(0), vl.color().fieldN(\"subject_race\")),\r\n          base.markText(label, white).encode(vl.text().count('subject_race')),\r\n          base.markText(label).encode(vl.text().count('subject_race')),\r\n          tooltip\r\n        )\r\n      .title(\"Daily Counts, by Race\")\r\n      .width(600)\r\n      .height(400);\r\n    \r\n  // combine 2 layer\r\n  return vl.layer(b, a, line).render()\r\n    .then(viewElement => {\r\n    // render returns a promise to a DOM element containing the chart\r\n    // viewElement.value contains the Vega View object instance\r\n    document.getElementById('view2').appendChild(viewElement);\r\n  });\r\n}\r\n\r\n"]}